# `yield`难点

在我们学习yield的时候可能不理解是从哪里停止的，又是从哪里继续的。下面我们要解释一下`yield`的暂停方式。

1. `yield` 的确是在遇到时立即暂停函数执行，而不是等到循环结束。
2. 当函数遇到 `yield` 语句时，它会立即返回 `yield` 后面的值，并暂停在那里。
3. 下次调用生成器时，函数会从 `yield` 语句之后的下一行代码继续执行。

让我们修改一下前面的例子，使其更清晰地展示 `yield` 的行为：

```python
def countdown(n):
    print("开始倒计时！")
    while n > 0:
        print(f"准备 yield {n}")
        yield n
        print(f"yield {n} 之后")
        n -= 1
    print("倒计时结束！")

for i in countdown(3):
    print(f"主程序收到：{i}")
```

运行这段代码，输出会是：

```
开始倒计时！
准备 yield 3
主程序收到：3
yield 3 之后
准备 yield 2
主程序收到：2
yield 2 之后
准备 yield 1
主程序收到：1
yield 1 之后
倒计时结束！
```

这个输出清楚地展示了：

1. 函数在每次遇到 `yield` 时立即暂停并返回值。
2. 主程序（for 循环）接收到 yield 的值并处理。
3. 下次迭代时，函数从上次 `yield` 之后的代码继续执行。
4. 也就是说，碰到`yield`之后会立即暂停并返回yield后面的内容，而后再次执行未执行的代码。

您之前看到的输出中，"发射倒计时：{n}" 出现在 "等待倒计时... {i}" 之后，是因为它在 `yield` 之后的代码中。每次迭代，函数都会执行到下一个 `yield`，然后暂停。

注意，如果yield后面没有返回值，一般来讲会返回`None`而不是报错。
