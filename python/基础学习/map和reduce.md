# map() 和 reduce() 函数：像厨师一样处理数据

想象一下，你是一位厨师，需要处理一大堆食材。你不会一次只处理一个，对吧？你可能会把它们分成几堆，分别处理，最后再把它们组合起来。这就是 `map()` 和 `reduce()` 函数在 Python 中的作用：高效地处理数据序列。

### 1. map()：批量加工

`map()` 函数就像一个“流水线”，它接收两个参数：

* **一个函数:** 就像你的“处理方法”，告诉流水线对每个食材做什么。
* **一个可迭代对象:** 就像你的“食材”，例如列表、元组等。

`map()` 会把函数依次应用到可迭代对象的每个元素上，并将结果返回一个新的迭代器。

#### 例子:

假设你想计算一个列表中每个数字的平方：

```python
numbers = [1, 2, 3, 4, 5]

# 定义一个计算平方的函数
def square(x):
  return x * x

# 使用 map() 函数
squared_numbers = map(square, numbers)

# 将结果转换为列表
print(list(squared_numbers))  # 输出: [1, 4, 9, 16, 25]
```

在这个例子中：

* `square()` 函数定义了“求平方”的处理方法。
* `map(square, numbers)` 将 `square()` 函数应用到 `numbers` 列表的每个元素上。
* 最终得到一个包含所有平方数的新迭代器。

### 2. reduce()：汇总结果

`reduce()` 函数就像一个“最终加工台”，它也接收两个参数：

* **一个函数:**  这个函数接收两个参数，并返回一个结果。它定义了如何将两个元素“合并”。
* **一个可迭代对象:**  就像你的“半成品”，例如列表、元组等。

`reduce()` 会将函数依次应用到可迭代对象的元素上，将前两个元素的结果与下一个元素一起计算，最终得到一个单一的结果。

#### 例子:

假设你想计算一个列表中所有数字的和：

```python
from functools import reduce  # 注意：reduce() 函数在 Python 3 中需要从 functools 模块导入

numbers = [1, 2, 3, 4, 5]

# 定义一个计算两个数之和的函数
def add(x, y):
  return x + y

# 使用 reduce() 函数
sum_of_numbers = reduce(add, numbers)

print(sum_of_numbers)  # 输出: 15
```

在这个例子中：

* `add()` 函数定义了如何将两个数字“合并”成它们的和。
* `reduce(add, numbers)` 将 `add()` 函数依次应用到 `numbers` 列表的元素上：
  * 首先计算 `1 + 2 = 3`
  * 然后计算 `3 + 3 = 6`
  * 接着计算 `6 + 4 = 10`
  * 最后计算 `10 + 5 = 15`
* 最终得到所有数字的和 `15`。

### 总结:

* `map()` 函数用于对可迭代对象的每个元素进行相同的操作，返回一个新的迭代器。
* `reduce()` 函数用于将可迭代对象的元素逐步合并，最终得到一个单一的结果。 实际上，是将上一次返回值作为此次的第一个数据来迭代处理进而完成任务。

这两个函数就像厨房里的好帮手，帮助你高效地处理数据，让你的代码更加简洁优雅。
